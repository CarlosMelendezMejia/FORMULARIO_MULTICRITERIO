<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Contraseña de Formulario</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='img/unam_ico.ico') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <style>
        /* Minimal overrides specific to password gate, leveraging index-page styles */
        .pw-card { max-width:420px; background: var(--glass-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border:1px solid var(--glass-border); border-radius:24px; padding:2.5rem 2.25rem 2.25rem; box-shadow: var(--shadow-light); position:relative; }
        .pw-card:hover { box-shadow: var(--shadow-heavy); }
        .pw-card h2 { color:#fff; font-weight:600; font-size:1.65rem; text-align:center; margin-bottom:1.25rem; text-shadow:0 2px 10px rgba(0,0,0,.3); }
        .pw-card .form-label { color:#fff; font-size:.8rem; text-transform:uppercase; letter-spacing:.5px; font-weight:500; }
    .pw-card .form-control { background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.25); color:#fff; padding:.85rem 1rem; border-radius:12px; flex:1 1 auto; width:1%; }
    .pw-card .input-group { flex-wrap:nowrap; }
    .pw-card .input-group .btn { display:flex; align-items:center; }
        .pw-card .form-control:focus { background:rgba(255,255,255,.18); border-color:rgba(255,255,255,.55); box-shadow:0 0 0 3px rgba(255,255,255,.15); }
        .pw-card .btn-primary { background:linear-gradient(135deg,var(--accent-color) 0%, var(--accent-hover) 100%); border:none; border-radius:12px; font-weight:600; letter-spacing:.5px; }
        .pw-card .btn-outline-secondary { border-radius:12px; }
        .pw-card .input-group .btn { border:1px solid rgba(255,255,255,.25); background:rgba(255,255,255,.12); color:#fff; }
        .pw-card .input-group .btn:hover { background:rgba(255,255,255,.2); }
        .pw-card .form-text { color:rgba(255,255,255,.75); }
        .pw-icons { position:absolute; top:-22px; left:50%; transform:translateX(-50%); display:flex; gap:.5rem; }
        .pw-icons span { width:42px; height:42px; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.3); backdrop-filter:blur(10px); border-radius:14px; color:#fff; font-size:1.25rem; }
    .pw-card::before { content:''; position:absolute; inset:0; border-radius:24px; padding:1px; background:linear-gradient(135deg,rgba(255,255,255,.35),rgba(255,255,255,0)); -webkit-mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000); mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000); -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none; }
        .pw-card .alert-danger { background:rgba(239,68,68,.15); border:1px solid rgba(239,68,68,.4); color:#fff; }
        .pw-card .alert-danger strong { font-weight:600; }
        @media (max-width:600px){ .pw-card { padding:2rem 1.5rem 1.75rem; } .pw-card h2 { font-size:1.4rem; } }
    </style>
</head>
<body class="global-bg index-page">
    <div class="main-container">
        <div class="login-wrapper" style="display:flex; align-items:center; justify-content:center; min-height:80vh;">
            <div class="pw-card fade-in">
                
                <h2>Protección de Formulario</h2>
                
                <p class="text-center text-white-50 mb-4" style="font-size:.9rem;">Este formulario requiere una contraseña para continuar.</p>

            {% if error %}
            <div class="alert alert-danger mb-4"><strong>Error:</strong> {{ error }}</div>
            {% endif %}

            <form method="post">
                <div class="mb-2">
                    <label for="password" class="form-label">Contraseña</label>
                    <div class="input-group">
                        <input type="password" class="form-control" id="password" name="password" required autocomplete="current-password">
                        <button class="btn btn-outline-secondary" type="button" id="togglePassword" aria-label="Mostrar u ocultar contraseña">
                            <i class="bi bi-eye" id="eyeIcon"></i>
                        </button>
                    </div>
                </div>
                <div class="form-text mb-3">Puedes usar el botón para mostrar u ocultar la contraseña.</div>

                <div class="d-flex gap-2">
                    <a href="{{ url_for('index') }}" class="btn btn-outline-secondary flex-fill">
                        <i class="bi bi-arrow-left me-1"></i>Volver
                    </a>
                    <button type="submit" class="btn btn-primary flex-fill">
                        <i class="bi bi-box-arrow-in-right me-1"></i>Acceder
                    </button>
                </div>
            </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (function(){
            const input = document.getElementById('password');
            const btn = document.getElementById('togglePassword');
            const icon = document.getElementById('eyeIcon');
            if (input && btn && icon) {
                btn.addEventListener('click', function(){
                    const show = input.type === 'password';
                    input.type = show ? 'text' : 'password';
                    icon.classList.toggle('bi-eye', !show);
                    icon.classList.toggle('bi-eye-slash', show);
                });
            }
        })();
    </script>

    <div class="login-logos">
        <img src="{{ url_for('static', filename='img/logo_unam.png') }}" alt="Logo UNAM">
        <img src="{{ url_for('static', filename='img/Logo_ceide.png') }}" alt="Logo CEIDE">
        <img src="{{ url_for('static', filename='img/logo_cfop.png') }}" alt="Logo CFOP">
        <img src="{{ url_for('static', filename='img/logo_fes.png') }}" alt="Logo FES">
        <img src="{{ url_for('static', filename='img/logo_planeacion.png') }}" alt="Logo Planeación">
    </div>
</body>
</html>
